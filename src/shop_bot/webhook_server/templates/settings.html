{% extends "base.html" %} {% block title %}–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ë–æ—Ç–∞ –∏ –•–æ—Å—Ç–æ–≤{% endblock %}
{% block content %}

<h1>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h1>

<div class="settings-container">
	<div class="settings-column-left">
		<section class="settings-section">
			<h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –•–æ—Å—Ç–∞–º–∏ (–°–µ—Ä–≤–µ—Ä–∞–º–∏)</h2>

			<div class="host-card" style="border: 2px solid #ff9800;">
				<div class="host-header">
					<h3>üåç –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ç–∞—Ä–∏—Ñ—ã (–í—Å–µ —Å–µ—Ä–≤–µ—Ä—ã + –ü–æ–¥–ø–∏—Å–∫–∞)</h3>
					<form action="{{ url_for('toggle_global_plans_route') }}" method="post">
						<input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
						{% if settings.enable_global_plans == 'true' %}
						<button type="submit" class="button button-warning button-small" title="–û—Ç–∫–ª—é—á–∏—Ç—å">‚è∏Ô∏è</button>
						{% else %}
						<button type="submit" class="button button-success button-small" title="–í–∫–ª—é—á–∏—Ç—å">‚ñ∂Ô∏è</button>
						{% endif %}
					</form>
				</div>
				<p>–¢–∞—Ä–∏—Ñ—ã, –¥–µ–π—Å—Ç–≤—É—é—â–∏–µ –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤ —Å—Ä–∞–∑—É. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —Å—Å—ã–ª–∫—É-–ø–æ–¥–ø–∏—Å–∫—É.</p>
				<div class="plans-section">
					<h4>–¢–∞—Ä–∏—Ñ—ã:</h4>
					{% if global_plans %}
					<ul class="plan-list">
						{% for plan in global_plans %}
						<li>
							<span>
								{{ plan.plan_name }} - {{ plan.price|round(0) }} RUB
							</span>
							<form action="{{ url_for('delete_plan_route', plan_id=plan.plan_id) }}" method="post"
								data-confirm="–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —Ç–∞—Ä–∏—Ñ?">
								<input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
								<button type="submit" class="button button-danger button-tiny">
									√ó
								</button>
							</form>
						</li>
						{% endfor %}
					</ul>
					{% else %}
					<p>–ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ç–∞—Ä–∏—Ñ—ã –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã.</p>
					{% endif %}
					<h5>–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Ç–∞—Ä–∏—Ñ:</h5>
					<form action="{{ url_for('add_plan_route') }}" method="post" class="form-inline">
						<input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
						<input type="hidden" name="host_name" value="ALL" />
						<input type="text" name="plan_name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ" required />
						<input type="number" name="months" placeholder="–ú–µ—Å." required />
						<input type="number" step="0.01" name="price" placeholder="–¶–µ–Ω–∞" required />
						<button type="submit" class="button button-primary button-small">
							+
						</button>
					</form>
				</div>
			</div>

			<div class="host-card">
				<h4>{% if edit_host %}–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ö–æ—Å—Ç{% else %}–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ö–æ—Å—Ç{% endif %}</h4>
				<form action="{{ url_for('update_host_route') if edit_host else url_for('add_host_route') }}"
					method="post">
					<input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
					{% if edit_host %}
					<input type="hidden" name="old_host_name" value="{{ edit_host.host_name }}">
					{% endif %}
					<div class="form-group">
						<label for="host_name">–ù–∞–∑–≤–∞–Ω–∏–µ —Ö–æ—Å—Ç–∞:</label>
						<input type="text" id="host_name" name="host_name" required maxlength="26" placeholder="RigaLatvia" title="Short display name" value="{{ edit_host.host_name if edit_host else '' }}" />
						<small class="field-hint">Short name shown to users (ASCII recommended).</small>
					</div>
					<div class="form-group">
						<label for="host_url">URL –ø–∞–Ω–µ–ª–∏ XUI:</label>
						<input type="url" id="host_url" name="host_url" placeholder="http://123.45.67.89:54321" required value="{{ edit_host.host_url if edit_host else '' }}" />
						<small class="field-hint">Example: http://123.45.67.89:54321</small>
					</div>
					<div class="form-group">
						<label for="host_username">–õ–æ–≥–∏–Ω XUI:</label>
						<input type="text" id="host_username" name="host_username" required placeholder="admin" value="{{ edit_host.host_username if edit_host else '' }}" />
						<small class="field-hint">XUI panel login.</small>
					</div>
					<div class="form-group password-wrapper">
						<label for="host_pass">–ü–∞—Ä–æ–ª—å XUI {% if edit_host %}(–æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º, —á—Ç–æ–±—ã –Ω–µ –º–µ–Ω—è—Ç—å){% endif
							%}:</label>
						<input type="password" id="host_pass" name="host_pass" {% if not edit_host %}required{% endif
							%} />
						<button type="button" class="toggle-password">üëÅÔ∏è</button>
					</div>
					<div class="form-group">
						<label for="host_inbound_id">ID –≤—Ö–æ–¥—è—â–µ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:</label>
						<input type="number" id="host_inbound_id" name="host_inbound_id" required placeholder="1" value="{{ edit_host.host_inbound_id if edit_host else '' }}" />
						<small class="field-hint">Inbound ID from 3x-ui panel.</small>
					</div>
					<button type="submit" class="button button-primary">{% if edit_host %}–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è{% else
						%}–î–æ–±–∞–≤–∏—Ç—å{% endif %}</button>
					{% if edit_host %}
					<a href="{{ url_for('settings_page') }}" class="button button-secondary">–û—Ç–º–µ–Ω–∞</a>
					{% endif %}
				</form>
			</div>

			{% if hosts %} {% for host in hosts %}
			<div class="host-card">
				<div class="host-header">
					<h3>
						{{ host.host_name }}
						<span
							class="status-badge {% if host.is_enabled %}status-active{% else %}status-stopped{% endif %}"
							style="margin-left: 10px; font-size: 0.7em;">
							{% if host.is_enabled %}–ê–∫—Ç–∏–≤–µ–Ω{% else %}–û—Ç–∫–ª—é—á–µ–Ω{% endif %}
						</span>
					</h3>
					<div class="host-actions" style="display: flex; gap: 5px;">
						<form action="{{ url_for('toggle_host_route', host_name=host.host_name) }}" method="post">
							<input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
							{% if host.is_enabled %}
							<button type="submit" class="button button-warning button-small"
								title="–û—Ç–∫–ª—é—á–∏—Ç—å">‚è∏Ô∏è</button>
							{% else %}
							<button type="submit" class="button button-success button-small"
								title="–í–∫–ª—é—á–∏—Ç—å">‚ñ∂Ô∏è</button>
							{% endif %}
						</form>

						<form action="{{ url_for('edit_host_page', host_name=host.host_name) }}" method="get">
							<button type="submit" class="button button-primary button-small"
								title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å">‚úèÔ∏è</button>
						</form>

						<form action="{{ url_for('delete_host_route', host_name=host.host_name) }}" method="post"
							data-confirm="–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —Ö–æ—Å—Ç –∏ –≤—Å–µ –µ–≥–æ —Ç–∞—Ä–∏—Ñ—ã?">
							<input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
							<button type="submit" class="button button-danger button-small" title="–£–¥–∞–ª–∏—Ç—å">
								üóëÔ∏è
							</button>
						</form>
					</div>
				</div>
				<p><strong>URL:</strong> {{ host.host_url }}
					{% if not host.is_enabled %} <span style="color: red; font-weight: bold;">(–û–¢–ö–õ–Æ–ß–ï–ù)</span>{% endif
					%}
				</p>
				<div class="plans-section">
					<h4>–¢–∞—Ä–∏—Ñ—ã:</h4>
					{% if host.plans %}
					<ul class="plan-list">
						{% for plan in host.plans %}
						<li>
							<span>
								{{ plan.plan_name }} - {{ plan.price|round(0) }} RUB
							</span>
							<form action="{{ url_for('delete_plan_route', plan_id=plan.plan_id) }}" method="post"
								data-confirm="–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —Ç–∞—Ä–∏—Ñ?">
								<input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
								<button type="submit" class="button button-danger button-tiny">
									√ó
								</button>
							</form>
						</li>
						{% endfor %}
					</ul>
					{% else %}
					<p>–¢–∞—Ä–∏—Ñ—ã –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã.</p>
					{% endif %}
					<h5>–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ç–∞—Ä–∏—Ñ:</h5>
					<form action="{{ url_for('add_plan_route') }}" method="post" class="form-inline">
						<input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
						<input type="hidden" name="host_name" value="{{ host.host_name }}" />
						<input type="text" name="plan_name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ" required />
						<input type="number" name="months" placeholder="–ú–µ—Å." required />
						<input type="number" step="0.01" name="price" placeholder="–¶–µ–Ω–∞" required />
						<button type="submit" class="button button-primary button-small">
							+
						</button>
					</form>
				</div>
			</div>
			{% endfor %} {% else %}
			<p>–•–æ—Å—Ç—ã –µ—â–µ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã.</p>
			{% endif %}
		</section>
	</div>

	<div class="settings-column-right">
		<section class="settings-section backup-card">
			<div class="backup-header">
				<div>
					<h2>–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ</h2>
					<p>–ü–æ–ª–Ω—ã–π –±—ç–∫–∞–ø (–ë–î, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, .env) –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ –æ–¥–∏–Ω –∫–ª–∏–∫.</p>
				</div>
				<span class="chip chip-safe">–ë–µ–∑–æ–ø–∞—Å–Ω–æ</span>
			</div>

			<div class="backup-actions">
				<form id="backup-form" action="{{ url_for('backup_route') }}" method="post">
					<input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
					<button type="submit" class="button button-primary button-wide">‚¨áÔ∏è –°–∫–∞—á–∞—Ç—å –±—ç–∫–∞–ø</button>
				</form>

				<form action="{{ url_for('import_route') }}" method="post" enctype="multipart/form-data"
					class="import-form">
					<input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
					<label class="file-drop">
						<input type="file" id="backup_file" name="backup_file" accept=".zip" required />
						<span>–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ .zip —Å—é–¥–∞ –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞</span>
					</label>
					<p class="warning-text">–ò–º–ø–æ—Ä—Ç –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç –±–æ—Ç–æ–≤, –∑–∞–º–µ–Ω–∏—Ç –≤—Å—é –±–∞–∑—É –∏ .env. –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏
						—É–≤–µ—Ä–µ–Ω—ã.</p>
					<button type="submit" class="button button-danger button-wide">‚¨ÜÔ∏è –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –±—ç–∫–∞–ø</button>
				</form>
			</div>
		</section>

		<form action="{{ url_for('settings_page') }}" method="post">
			<input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
			<section class="settings-section">
				<h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ü–∞–Ω–µ–ª–∏</h2>
				<div class="form-group">
					<label for="panel_login">–õ–æ–≥–∏–Ω –¥–ª—è –≤—Ö–æ–¥–∞ –≤ –ø–∞–Ω–µ–ª—å:</label>
					<input type="text" id="panel_login" name="panel_login" value="{{ settings.panel_login or '' }}" placeholder="admin" required />
					<small class="field-hint">Admin login for the web panel.</small>
				</div>
				<div class="form-group password-wrapper">
					<label for="panel_password">–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å (–æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º, —á—Ç–æ–±—ã –Ω–µ –º–µ–Ω—è—Ç—å):</label>
					<input type="password" id="panel_password" name="panel_password" placeholder="new-password" />
					<small class="field-hint">Leave empty to keep current password.</small>
					<button type="button" class="toggle-password">üëÅÔ∏è</button>
				</div>
			</section>

			<section class="settings-section">
				<h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ë–æ—Ç–∞</h2>
				<div class="form-group password-wrapper">
					<label for="telegram_bot_token">–¢–æ–∫–µ–Ω –±–æ—Ç–∞:</label>
					<input type="password" id="telegram_bot_token" name="telegram_bot_token" placeholder="123456:ABCDEF" value="{{ settings.telegram_bot_token or '' }}" required />
					<small class="field-hint">Keep this token secret.</small>
					<button type="button" class="copy-button" data-copy-target="telegram_bot_token">üìã</button>
					<button type="button" class="toggle-password">üëÅÔ∏è</button>
				</div>
				<div class="form-group">
					<label for="telegram_bot_username">Username –±–æ—Ç–∞ (–±–µ–∑ @):</label>
					<input type="text" id="telegram_bot_username" name="telegram_bot_username" placeholder="myvpn_bot" value="{{ settings.telegram_bot_username or '' }}" required />
					<small class="field-hint">Without @. Example: myvpn_bot.</small>
				</div>
				<div class="form-group">
					<label for="admin_telegram_id">Admin Telegram ID:</label>
					<input type="text" id="admin_telegram_id" name="admin_telegram_id" placeholder="123456789" value="{{ settings.admin_telegram_id or '' }}" required />
					<small class="field-hint">Numeric ID for admin notifications.</small>
				</div>
				<div class="form-group form-group-checkbox">
					<input type="hidden" name="enable_admin_payment_notifications" value="false" />
					<input type="checkbox" id="enable_admin_payment_notifications"
						name="enable_admin_payment_notifications" value="true" {% if
						settings.enable_admin_payment_notifications=='true' %}checked{% endif %}>
					<label for="enable_admin_payment_notifications">–í–∫–ª—é—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–æ–∫—É–ø–∫–∞—Ö</label>
				</div>
				<div class="form-group form-group-checkbox">
					<input type="hidden" name="email_prompt_enabled" value="false" />
					<input type="checkbox" id="email_prompt_enabled" name="email_prompt_enabled" value="true" {% if
						settings.email_prompt_enabled=='true' %}checked{% endif %}>
					<label for="email_prompt_enabled">–°–ø—Ä–∞—à–∏–≤–∞—Ç—å Email –ø–µ—Ä–µ–¥ –æ–ø–ª–∞—Ç–æ–π</label>
				</div>
				<div class="form-group form-group-checkbox">
					<input type="hidden" name="enable_admin_trial_notifications" value="false" />
					<input type="checkbox" id="enable_admin_trial_notifications" name="enable_admin_trial_notifications"
						value="true" {% if settings.enable_admin_trial_notifications=='true' %}checked{% endif %}>
					<label for="enable_admin_trial_notifications">–í–∫–ª—é—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–æ–±–Ω—ã—Ö –∫–ª—é—á–∞—Ö</label>
				</div>
			</section>
			<section class="settings-section">
				<h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ü–æ–¥–¥–µ—Ä–∂–∫–∏ –∏ –ë–æ—Ç–∞-–°–∞–ø–ø–æ—Ä—Ç–∞</h2>
				<div class="form-group">
					<label for="support_user">URL –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏–ª–∏ –ë–æ—Ç–∞-–°–∞–ø–ø–æ—Ä—Ç–∞:</label>
					<input type="text" id="support_user" name="support_user"
						value="{{ settings.support_user or '' }}" />
				</div>
				<div class="form-group password-wrapper">
					<label for="support_bot_token">–¢–æ–∫–µ–Ω Support-–±–æ—Ç–∞ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è):</label>
					<input type="password" id="support_bot_token" name="support_bot_token"
						value="{{ settings.support_bot_token or '' }}" />
					<button type="button" class="copy-button" data-copy-target="support_bot_token">üìã</button>
					<button type="button" class="toggle-password">üëÅÔ∏è</button>
				</div>
				<div class="form-group">
					<label for="support_group_id">ID –ì—Ä—É–ø–ø—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏ (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤–∫–ª—é—á–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è —Ñ–æ—Ä—É–º–∞
						(Topics)):</label>
					<input type="text" id="support_group_id" name="support_group_id"
						value="{{ settings.support_group_id or '' }}" />
				</div>
			</section>
			<section class="settings-section">
				<h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã</h2>
				<div class="form-group form-group-checkbox">
					<input type="hidden" name="enable_referrals" value="false" />
					<input type="checkbox" id="enable_referrals" name="enable_referrals" value="true" {% if
						settings.enable_referrals=='true' %}checked{% endif %}>
					<label for="enable_referrals">–í–∫–ª—é—á–∏—Ç—å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å–∏—Å—Ç–µ–º—É</label>
				</div>
				<div class="form-group">
					<label for="minimum_withdrawal">–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞:</label>
					<input type="number" id="minimum_withdrawal" name="minimum_withdrawal"
						value="{{ settings.minimum_withdrawal or '10' }}" />
				</div>
				<div class="form-group">
					<label for="referral_percentage">–ü—Ä–æ—Ü–µ–Ω—Ç –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è –ø—Ä–∏–≥–ª–∞—Å–∏–≤—à–µ–º—É (%):</label>
					<input type="number" id="referral_percentage" name="referral_percentage"
						value="{{ settings.referral_percentage or '10' }}" />
				</div>
				<div class="form-group">
					<label for="referral_discount">–°–∫–∏–¥–∫–∞ –¥–ª—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ –ø–µ—Ä–≤—É—é –ø–æ–∫—É–ø–∫—É (%):</label>
					<input type="number" id="referral_discount" name="referral_discount"
						value="{{ settings.referral_discount or '5' }}" />
				</div>
			</section>
			<section class="settings-section">
				<h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ü—Ä–æ–±–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞</h2>
				<div class="form-group form-group-checkbox">
					<input type="hidden" name="trial_enabled" value="false" />
					<input type="checkbox" id="trial_enabled" name="trial_enabled" value="true" {% if
						settings.trial_enabled=='true' %}checked{% endif %}>
					<label for="trial_enabled">–í–∫–ª—é—á–∏—Ç—å –ø—Ä–æ–±–Ω—ã–π –ø–µ—Ä–∏–æ–¥</label>
				</div>
				<div class="form-group">
					<label for="trial_duration_days">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–±–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞ (–≤ –¥–Ω—è—Ö):</label>
					<input type="number" id="trial_duration_days" name="trial_duration_days"
						value="{{ settings.trial_duration_days or '3' }}" />
				</div>
			</section>
			<section class="settings-section">
				<h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ü–ª–∞—Ç–µ–∂–Ω—ã—Ö –°–∏—Å—Ç–µ–º</h2>
				<h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ YooKassa</h2>
				<div class="form-group form-group-checkbox">
					<input type="hidden" name="yookassa_enabled" value="false" />
					<input type="checkbox" id="yookassa_enabled" name="yookassa_enabled" value="true" {% if
						settings.yookassa_enabled=='true' %}checked{% endif %}>
					<label for="yookassa_enabled">–í–∫–ª—é—á–∏—Ç—å –æ–ø–ª–∞—Ç—É YooKassa</label>
				</div>
				<div class="toggle-section" data-toggle-section="yookassa_enabled">
					<div class="form-group">
						<label for="receipt_email">–ü–æ—á—Ç–∞ –¥–ª—è —á–µ–∫–æ–≤:</label>
						<input type="text" id="receipt_email" name="receipt_email"
							value="{{ settings.receipt_email or '' }}" />
					</div>
					<div class="form-group">
						<label for="yookassa_shop_id">YooKassa Shop ID:</label>
						<input type="text" id="yookassa_shop_id" name="yookassa_shop_id"
							value="{{ settings.yookassa_shop_id or '' }}" />
					</div>
					<div class="form-group password-wrapper">
						<label for="yookassa_secret_key">YooKassa Secret Key:</label>
						<input type="password" id="yookassa_secret_key" name="yookassa_secret_key"
							value="{{ settings.yookassa_secret_key or '' }}" />
						<button type="button" class="copy-button" data-copy-target="yookassa_secret_key">üìã</button>
						<button type="button" class="toggle-password">üëÅÔ∏è</button>
					</div>
					<div class="form-group form-group-checkbox">
						<input type="hidden" name="sbp_enabled" value="false" />
						<input type="checkbox" id="sbp_enabled" name="sbp_enabled" value="true" {% if
							settings.sbp_enabled=='true' %}checked{% endif %}>
						<label for="sbp_enabled">–í–∫–ª—é—á–∏—Ç—å –æ–ø–ª–∞—Ç—É —á–µ—Ä–µ–∑ –°–ë–ü</label>
					</div>
				</div>

				<h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ P2P</h2>
				<div class="form-group form-group-checkbox">
					<input type="hidden" name="p2p_enabled" value="false" />
					<input type="checkbox" id="p2p_enabled" name="p2p_enabled" value="true" {% if
						settings.p2p_enabled=='true' %}checked{% endif %}>
					<label for="p2p_enabled">–í–∫–ª—é—á–∏—Ç—å –æ–ø–ª–∞—Ç—É –ø–æ –∫–∞—Ä—Ç–µ (P2P)</label>
				</div>
				<div class="toggle-section" data-toggle-section="p2p_enabled">
					<div class="form-group">
						<label for="p2p_card_number">–ö–∞—Ä—Ç–∞/—Ä–µ–∫–≤–∏–∑–∏—Ç—ã –¥–ª—è P2P –æ–ø–ª–∞—Ç—ã:</label>
						<input type="text" id="p2p_card_number" name="p2p_card_number"
							value="{{ settings.p2p_card_number or '' }}"
							placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 5536 9137 23XX 4567, –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤" />
					</div>
				</div>
				<h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Stars</h2>
				<div class="form-group form-group-checkbox">
					<input type="hidden" name="stars_enabled" value="false" />
					<input type="checkbox" id="stars_enabled" name="stars_enabled" value="true" {% if
						settings.stars_enabled=='true' %}checked{% endif %}>
					<label for="stars_enabled">–í–∫–ª—é—á–∏—Ç—å –æ–ø–ª–∞—Ç—É Telegram Stars</label>
				</div>
				<div class="toggle-section" data-toggle-section="stars_enabled">
					<div class="form-group">
						<label for="stars_rub_per_star">–ö—É—Ä—Å (RUB –∑–∞ 1 Star):</label>
						<input type="number" step="0.01" id="stars_rub_per_star" name="stars_rub_per_star"
							value="{{ settings.stars_rub_per_star or '2.5' }}" />
						<small class="field-hint">–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –∫—É—Ä—Å: 1.6-2.5 RUB.
							–û—Å—Ç–∞–≤—å—Ç–µ 0 –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫—É—Ä—Å–∞ (1.6 RUB).</small>
					</div>
				</div>
				<h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ CryptoBot</h2>
				<div class="form-group form-group-checkbox">
					<input type="hidden" name="cryptobot_enabled" value="false" />
					<input type="checkbox" id="cryptobot_enabled" name="cryptobot_enabled" value="true" {% if
						settings.cryptobot_enabled=='true' %}checked{% endif %}>
					<label for="cryptobot_enabled">–í–∫–ª—é—á–∏—Ç—å –æ–ø–ª–∞—Ç—É CryptoBot</label>
				</div>
				<div class="toggle-section" data-toggle-section="cryptobot_enabled">
					<div class="form-group password-wrapper">
						<label for="cryptobot_token">CryptoBot Token:</label>
						<input type="password" id="cryptobot_token" name="cryptobot_token"
							value="{{ settings.cryptobot_token or '' }}" />
						<button type="button" class="copy-button" data-copy-target="cryptobot_token">üìã</button>
						<button type="button" class="toggle-password">üëÅÔ∏è</button>
					</div>
					<div class="form-group password-wrapper">
						<label for="cryptobot_webhook_secret">CryptoBot Webhook Secret (URL token):</label>
						<input type="password" id="cryptobot_webhook_secret" name="cryptobot_webhook_secret"
							autocomplete="off" value="{{ settings.cryptobot_webhook_secret or '' }}"
							placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: my-super-secret-token" />
						<button type="button" class="copy-button"
							data-copy-target="cryptobot_webhook_secret">üìã</button>
						<button type="button" class="toggle-password">üëÅÔ∏è</button>
					</div>
				</div>
				<h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Heleket</h2>
				<div class="form-group form-group-checkbox">
					<input type="hidden" name="heleket_enabled" value="false" />
					<input type="checkbox" id="heleket_enabled" name="heleket_enabled" value="true" {% if
						settings.heleket_enabled=='true' %}checked{% endif %}>
					<label for="heleket_enabled">–í–∫–ª—é—á–∏—Ç—å –æ–ø–ª–∞—Ç—É Heleket (–ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞)</label>
				</div>
				<div class="toggle-section" data-toggle-section="heleket_enabled">
					<div class="form-group">
						<label for="heleket_merchant_id">Heleket Merchant ID:</label>
						<input type="text" id="heleket_merchant_id" name="heleket_merchant_id"
							value="{{ settings.heleket_merchant_id or '' }}" />
					</div>
					<div class="form-group password-wrapper">
						<label for="heleket_api_key">Heleket API Key:</label>
						<input type="password" id="heleket_api_key" name="heleket_api_key"
							value="{{ settings.heleket_api_key or '' }}" />
						<button type="button" class="copy-button" data-copy-target="heleket_api_key">üìã</button>
						<button type="button" class="toggle-password">üëÅÔ∏è</button>
					</div>
				</div>
				<div class="form-group">
					<label for="domain">–í–∞—à –¥–æ–º–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, my-shop.com):</label>
					<input type="text" id="domain" name="domain" placeholder="example.com" value="{{ settings.domain or '' }}" />
					<small class="field-hint">–£–∫–∞–∂–∏—Ç–µ IP-–∞–¥—Ä–µ—Å —ç—Ç–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞, –≥–¥–µ
						—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –±–æ—Ç.</small>
				</div>
				<div class="form-group">
					<label for="subscription_name">–ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏ (–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏):</label>
					<input type="text" id="subscription_name" name="subscription_name"
						value="{{ settings.subscription_name or 'AresVPN' }}" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: AresVPN" />
					<small class="field-hint">–≠—Ç–æ –∏–º—è –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ
						–ø–æ–¥–ø–∏—Å–∫–∏.</small>
				</div>
				<h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ TonConnect</h2>
				<div class="form-group form-group-checkbox">
					<input type="hidden" name="tonconnect_enabled" value="false" />
					<input type="checkbox" id="tonconnect_enabled" name="tonconnect_enabled" value="true" {% if
						settings.tonconnect_enabled=='true' %}checked{% endif %}>
					<label for="tonconnect_enabled">–í–∫–ª—é—á–∏—Ç—å –æ–ø–ª–∞—Ç—É TON Connect</label>
				</div>
				<div class="toggle-section" data-toggle-section="tonconnect_enabled">
					<div class="form-group">
						<label for="ton_wallet_address">Ton Wallet:</label>
						<input type="text" id="ton_wallet_address" name="ton_wallet_address"
							value="{{ settings.ton_wallet_address or '' }}" />
					</div>
					<div class="form-group password-wrapper">
						<label for="tonapi_key">TonAPI Key:</label>
						<input type="password" id="tonapi_key" name="tonapi_key"
							value="{{ settings.tonapi_key or '' }}" />
						<button type="button" class="copy-button" data-copy-target="tonapi_key">üìã</button>
						<button type="button" class="toggle-password">üëÅÔ∏è</button>
					</div>
				</div>
			</section>

			<section class="settings-section">
				<h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ö–æ–Ω—Ç–µ–Ω—Ç–∞</h2>
				<div class="form-group">
					<label for="about_text">–¢–µ–∫—Å—Ç "–û –ø—Ä–æ–µ–∫—Ç–µ":</label>
					<textarea id="about_text" name="about_text" rows="3">
{{
							settings.about_text or ""
						}}</textarea>
				</div>
				<div class="form-group">
					<label for="support_text">–¢–µ–∫—Å—Ç –≤ —Ä–∞–∑–¥–µ–ª–µ "–ü–æ–¥–¥–µ—Ä–∂–∫–∞":</label>
					<textarea id="support_text" name="support_text" rows="3">
{{
							settings.support_text or ""
						}}</textarea>
				</div>
				<div class="form-group">
					<label for="terms_url">URL "–£—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è":</label>
					<input type="url" id="terms_url" name="terms_url" value="{{ settings.terms_url or '' }}" />
				</div>
				<div class="form-group">
					<label for="privacy_url">URL "–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏":</label>
					<input type="url" id="privacy_url" name="privacy_url" value="{{ settings.privacy_url or '' }}" />
				</div>
				<div class="form-group">
					<label for="channel_url">URL Telegram-–∫–∞–Ω–∞–ª–∞ (–Ω–∞–ø—Ä. https://t.me/nnstorenews):</label>
					<input type="url" id="channel_url" name="channel_url" value="{{ settings.channel_url or '' }}" />
				</div>
				<div class="form-group form-group-checkbox">
					<input type="hidden" name="force_subscription" value="false" />
					<input type="checkbox" id="force_subscription" name="force_subscription" value="true" {% if
						settings.force_subscription=='true' %}checked{% endif %}>
					<label for="force_subscription">–¢—Ä–µ–±–æ–≤–∞—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—É—é –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ –∫–∞–Ω–∞–ª</label>
				</div>
			</section>

			<button type="submit" class="button button-primary">
				–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
			</button>
		</form>
	</div>
</div>

{% endblock %}
